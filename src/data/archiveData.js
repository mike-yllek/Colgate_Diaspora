/* ── Historical data (all 13 seasons) ────────────────────────────────────
   Rows within each season are ordered 1st → last place.
   ─────────────────────────────────────────────────────────────────────── */
export const SEASONS = {
  "2013": [{"team":"Ben","w":8,"l":6,"pf":1489.0,"pa":1361.0,"playoffs":1,"championship":1},{"team":"Ollie","w":9,"l":5,"pf":1446.0,"pa":1229.0,"playoffs":1,"championship":0},{"team":"Mike","w":8,"l":6,"pf":1465.0,"pa":1441.0,"playoffs":1,"championship":0},{"team":"Eric","w":7,"l":7,"pf":1464.0,"pa":1506.0,"playoffs":0,"championship":0},{"team":"Dave","w":7,"l":7,"pf":1376.0,"pa":1341.0,"playoffs":0,"championship":0},{"team":"Bobby","w":7,"l":7,"pf":1374.0,"pa":1394.0,"playoffs":0,"championship":0},{"team":"Joe","w":7,"l":7,"pf":1340.0,"pa":1334.0,"playoffs":1,"championship":0},{"team":"Kenley","w":7,"l":7,"pf":1319.0,"pa":1404.0,"playoffs":0,"championship":0},{"team":"Jack","w":5,"l":9,"pf":1325.0,"pa":1495.0,"playoffs":0,"championship":0},{"team":"Andy","w":5,"l":9,"pf":1253.0,"pa":1347.0,"playoffs":0,"championship":0}],
  "2014": [{"team":"Mike","w":8,"l":5,"pf":1301.0,"pa":1082.0,"playoffs":1,"championship":1},{"team":"Dave","w":9,"l":4,"pf":1345.0,"pa":1152.0,"playoffs":1,"championship":0},{"team":"Ben","w":9,"l":4,"pf":1183.0,"pa":1110.0,"playoffs":1,"championship":0},{"team":"TJ","w":8,"l":5,"pf":1298.0,"pa":1232.0,"playoffs":1,"championship":0},{"team":"Andy","w":7,"l":6,"pf":1125.0,"pa":1197.0,"playoffs":0,"championship":0},{"team":"Kenley","w":6,"l":7,"pf":1110.0,"pa":1229.0,"playoffs":0,"championship":0},{"team":"Jack","w":5,"l":8,"pf":1213.0,"pa":1226.0,"playoffs":0,"championship":0},{"team":"Ollie","w":5,"l":8,"pf":1096.0,"pa":1133.0,"playoffs":0,"championship":0},{"team":"Bobby","w":5,"l":8,"pf":1038.0,"pa":1232.0,"playoffs":0,"championship":0},{"team":"Joe","w":3,"l":10,"pf":1111.0,"pa":1227.0,"playoffs":0,"championship":0}],
  "2015": [{"team":"Kenley","w":7,"l":6,"pf":1145.0,"pa":1155.0,"playoffs":1,"championship":1},{"team":"Bobby","w":8,"l":3,"pf":1434.0,"pa":1196.0,"playoffs":1,"championship":0},{"team":"Ollie","w":8,"l":5,"pf":1103.0,"pa":1103.0,"playoffs":1,"championship":0},{"team":"Mike","w":7,"l":5,"pf":1368.0,"pa":1246.0,"playoffs":1,"championship":0},{"team":"Joe","w":7,"l":6,"pf":1281.0,"pa":1143.0,"playoffs":0,"championship":0},{"team":"Jack","w":7,"l":5,"pf":1155.0,"pa":1167.0,"playoffs":0,"championship":0},{"team":"TJ","w":6,"l":7,"pf":1117.0,"pa":1279.0,"playoffs":0,"championship":0},{"team":"Andy","w":6,"l":7,"pf":1086.0,"pa":1141.0,"playoffs":0,"championship":0},{"team":"Dave","w":4,"l":9,"pf":1110.0,"pa":1149.0,"playoffs":0,"championship":0},{"team":"Ben","w":3,"l":10,"pf":975.0,"pa":1195.0,"playoffs":0,"championship":0}],
  "2016": [{"team":"Bobby","w":7,"l":6,"pf":1429.1,"pa":1390.3,"playoffs":1,"championship":1},{"team":"Andy","w":10,"l":3,"pf":1425.7,"pa":1417.3,"playoffs":1,"championship":0},{"team":"Kenley","w":10,"l":3,"pf":1404.8,"pa":1320.3,"playoffs":1,"championship":0},{"team":"Joe","w":8,"l":5,"pf":1501.6,"pa":1401.3,"playoffs":1,"championship":0},{"team":"Mike","w":8,"l":5,"pf":1429.5,"pa":1359.7,"playoffs":1,"championship":0},{"team":"Dave","w":6,"l":7,"pf":1476.5,"pa":1424.3,"playoffs":1,"championship":0},{"team":"Ollie","w":5,"l":8,"pf":1420.8,"pa":1305.2,"playoffs":0,"championship":0},{"team":"Ben","w":5,"l":8,"pf":1369.0,"pa":1401.6,"playoffs":0,"championship":0},{"team":"Jack","w":3,"l":10,"pf":1308.9,"pa":1535.6,"playoffs":0,"championship":0},{"team":"TJ","w":3,"l":10,"pf":1287.9,"pa":1498.4,"playoffs":0,"championship":0}],
  "2017": [{"team":"Ollie","w":10,"l":3,"pf":1577.8,"pa":1253.4,"playoffs":1,"championship":1},{"team":"Mike","w":9,"l":4,"pf":1291.9,"pa":1282.9,"playoffs":1,"championship":0},{"team":"Kenley","w":8,"l":5,"pf":1355.8,"pa":1317.8,"playoffs":1,"championship":0},{"team":"Jack","w":7,"l":6,"pf":1427.8,"pa":1343.0,"playoffs":1,"championship":0},{"team":"Dave","w":7,"l":6,"pf":1380.7,"pa":1320.6,"playoffs":1,"championship":0},{"team":"Andy","w":7,"l":6,"pf":1258.5,"pa":1253.2,"playoffs":1,"championship":0},{"team":"Joe","w":6,"l":7,"pf":1357.9,"pa":1375.5,"playoffs":0,"championship":0},{"team":"Ben","w":4,"l":9,"pf":1226.6,"pa":1326.2,"playoffs":0,"championship":0},{"team":"Kiri","w":4,"l":9,"pf":1185.1,"pa":1408.2,"playoffs":0,"championship":0},{"team":"Bobby","w":3,"l":10,"pf":1200.6,"pa":1382.2,"playoffs":0,"championship":0}],
  "2018": [{"team":"Dave","w":9,"l":4,"pf":1687.3,"pa":1532.6,"playoffs":1,"championship":1},{"team":"Ben","w":9,"l":4,"pf":1464.6,"pa":1519.1,"playoffs":1,"championship":0},{"team":"Joe","w":8,"l":5,"pf":1601.9,"pa":1456.8,"playoffs":1,"championship":0},{"team":"Kiri","w":7,"l":6,"pf":1605.9,"pa":1477.7,"playoffs":1,"championship":0},{"team":"Jack","w":7,"l":6,"pf":1520.3,"pa":1396.8,"playoffs":1,"championship":0},{"team":"Mike","w":6,"l":7,"pf":1493.2,"pa":1486.7,"playoffs":1,"championship":0},{"team":"Ollie","w":5,"l":8,"pf":1569.9,"pa":1516.5,"playoffs":0,"championship":0},{"team":"Andy","w":5,"l":8,"pf":1492.4,"pa":1545.3,"playoffs":0,"championship":0},{"team":"Kenley","w":5,"l":8,"pf":1337.0,"pa":1506.5,"playoffs":0,"championship":0},{"team":"Bobby","w":4,"l":9,"pf":1155.6,"pa":1490.0,"playoffs":0,"championship":0}],
  "2019": [{"team":"Kiri","w":11,"l":2,"pf":1464.4,"pa":1171.62,"playoffs":1,"championship":1},{"team":"Joe","w":10,"l":3,"pf":1538.96,"pa":1338.1,"playoffs":1,"championship":0},{"team":"Ben","w":8,"l":5,"pf":1589.02,"pa":1454.4,"playoffs":1,"championship":0},{"team":"Mike","w":8,"l":5,"pf":1377.02,"pa":1427.2,"playoffs":1,"championship":0},{"team":"Andy","w":7,"l":6,"pf":1556.22,"pa":1423.04,"playoffs":1,"championship":0},{"team":"Ollie","w":6,"l":7,"pf":1388.8,"pa":1447.12,"playoffs":1,"championship":0},{"team":"Dave","w":5,"l":8,"pf":1457.24,"pa":1464.96,"playoffs":0,"championship":0},{"team":"Kenley","w":4,"l":9,"pf":1297.42,"pa":1511.76,"playoffs":0,"championship":0},{"team":"Jack","w":3,"l":10,"pf":1341.1,"pa":1555.46,"playoffs":0,"championship":0},{"team":"Bobby","w":3,"l":10,"pf":1299.58,"pa":1516.1,"playoffs":0,"championship":0}],
  "2020": [{"team":"Jack","w":10,"l":3,"pf":1618.22,"pa":1310.76,"playoffs":1,"championship":1},{"team":"Andy","w":8,"l":5,"pf":1577.8,"pa":1476.28,"playoffs":1,"championship":0},{"team":"Dave","w":8,"l":5,"pf":1565.2,"pa":1387.82,"playoffs":1,"championship":0},{"team":"Joe","w":8,"l":5,"pf":1505.44,"pa":1421.34,"playoffs":1,"championship":0},{"team":"Bobby","w":7,"l":6,"pf":1464.58,"pa":1359.5,"playoffs":1,"championship":0},{"team":"Ollie","w":6,"l":7,"pf":1466.62,"pa":1521.46,"playoffs":1,"championship":0},{"team":"Kiri","w":6,"l":7,"pf":1247.48,"pa":1484.14,"playoffs":0,"championship":0},{"team":"Mike","w":5,"l":8,"pf":1374.98,"pa":1443.58,"playoffs":0,"championship":0},{"team":"Kenley","w":5,"l":8,"pf":1261.1,"pa":1356.4,"playoffs":0,"championship":0},{"team":"Ben","w":2,"l":11,"pf":1098.46,"pa":1418.6,"playoffs":0,"championship":0}],
  "2021": [{"team":"Ben","w":9,"l":5,"pf":1692.5,"pa":1580.9,"playoffs":1,"championship":1},{"team":"Andy","w":9,"l":5,"pf":1491.72,"pa":1367.32,"playoffs":1,"championship":0},{"team":"Joe","w":8,"l":6,"pf":1577.16,"pa":1494.72,"playoffs":1,"championship":0},{"team":"Kiri","w":8,"l":6,"pf":1437.58,"pa":1548.38,"playoffs":1,"championship":0},{"team":"Bobby","w":7,"l":7,"pf":1625.02,"pa":1606.1,"playoffs":1,"championship":0},{"team":"Dave","w":7,"l":7,"pf":1506.12,"pa":1565.46,"playoffs":1,"championship":0},{"team":"Ollie","w":6,"l":8,"pf":1565.42,"pa":1607.08,"playoffs":0,"championship":0},{"team":"Jack","w":6,"l":8,"pf":1553.24,"pa":1552.84,"playoffs":0,"championship":0},{"team":"Mike","w":6,"l":8,"pf":1531.94,"pa":1612.26,"playoffs":0,"championship":0},{"team":"Kenley","w":4,"l":10,"pf":1433.16,"pa":1478.8,"playoffs":0,"championship":0}],
  "2022": [{"team":"Andy","w":8,"l":6,"pf":1572.16,"pa":1462.54,"playoffs":1,"championship":1},{"team":"Ollie","w":10,"l":4,"pf":1775.38,"pa":1507.08,"playoffs":1,"championship":0},{"team":"Joe","w":8,"l":6,"pf":1675.72,"pa":1551.12,"playoffs":1,"championship":0},{"team":"Kenley","w":8,"l":6,"pf":1625.8,"pa":1508.88,"playoffs":1,"championship":0},{"team":"Ben","w":8,"l":6,"pf":1567.7,"pa":1517.76,"playoffs":1,"championship":0},{"team":"Bobby","w":8,"l":6,"pf":1462.66,"pa":1567.46,"playoffs":1,"championship":0},{"team":"Mike","w":5,"l":9,"pf":1499.8,"pa":1534.3,"playoffs":0,"championship":0},{"team":"Jack","w":5,"l":9,"pf":1458.34,"pa":1576.2,"playoffs":0,"championship":0},{"team":"Kiri","w":5,"l":9,"pf":1399.22,"pa":1642.99,"playoffs":0,"championship":0},{"team":"Dave","w":5,"l":9,"pf":1336.86,"pa":1505.3,"playoffs":0,"championship":0}],
  "2023": [{"team":"Mike","w":7,"l":7,"pf":1500.32,"pa":1478.7,"playoffs":1,"championship":1},{"team":"Andy","w":11,"l":3,"pf":1767.12,"pa":1526.66,"playoffs":1,"championship":0},{"team":"Joe","w":10,"l":4,"pf":1609.62,"pa":1314.24,"playoffs":1,"championship":0},{"team":"Jack","w":8,"l":6,"pf":1599.68,"pa":1346.04,"playoffs":1,"championship":0},{"team":"Ollie","w":7,"l":7,"pf":1531.96,"pa":1486.7,"playoffs":1,"championship":0},{"team":"Dave","w":7,"l":7,"pf":1453.4,"pa":1490.62,"playoffs":1,"championship":0},{"team":"Ben","w":7,"l":7,"pf":1416.44,"pa":1506.94,"playoffs":0,"championship":0},{"team":"Kenley","w":6,"l":8,"pf":1419.74,"pa":1655.84,"playoffs":0,"championship":0},{"team":"Kiri","w":5,"l":9,"pf":1393.24,"pa":1533.26,"playoffs":0,"championship":0},{"team":"Bobby","w":2,"l":12,"pf":1320.4,"pa":1672.64,"playoffs":0,"championship":0}],
  "2024": [{"team":"Joe","w":12,"l":2,"pf":1802.94,"pa":1444.8,"playoffs":1,"championship":1},{"team":"Dave","w":10,"l":4,"pf":1621.88,"pa":1562.86,"playoffs":1,"championship":0},{"team":"Ben","w":8,"l":6,"pf":1583.28,"pa":1477.6,"playoffs":1,"championship":0},{"team":"Kiri","w":8,"l":6,"pf":1496.16,"pa":1436.68,"playoffs":1,"championship":0},{"team":"Andy","w":7,"l":7,"pf":1539.18,"pa":1508.7,"playoffs":1,"championship":0},{"team":"Ollie","w":7,"l":7,"pf":1534.36,"pa":1533.54,"playoffs":1,"championship":0},{"team":"Kenley","w":5,"l":9,"pf":1586.72,"pa":1657.02,"playoffs":0,"championship":0},{"team":"Mike","w":5,"l":9,"pf":1399.48,"pa":1583.02,"playoffs":0,"championship":0},{"team":"Jack","w":4,"l":10,"pf":1516.64,"pa":1684.84,"playoffs":0,"championship":0},{"team":"Bobby","w":4,"l":10,"pf":1410.36,"pa":1601.94,"playoffs":0,"championship":0}],
  "2025": [{"team":"Joe","w":11,"l":3,"pf":1740.58,"pa":1532.7,"playoffs":1,"championship":1},{"team":"Bobby","w":10,"l":4,"pf":1728.64,"pa":1531.88,"playoffs":1,"championship":0},{"team":"Mike","w":9,"l":5,"pf":1718.74,"pa":1627.96,"playoffs":1,"championship":0},{"team":"Ben","w":8,"l":6,"pf":1640.44,"pa":1627.96,"playoffs":1,"championship":0},{"team":"Dave","w":8,"l":6,"pf":1615.68,"pa":1593.16,"playoffs":1,"championship":0},{"team":"Ollie","w":7,"l":7,"pf":1678.36,"pa":1644.12,"playoffs":1,"championship":0},{"team":"Jack","w":5,"l":8,"pf":1453.52,"pa":1605.7,"playoffs":0,"championship":0},{"team":"Andy","w":4,"l":10,"pf":1583.92,"pa":1742.28,"playoffs":0,"championship":0},{"team":"Kenley","w":4,"l":10,"pf":1583.92,"pa":1742.28,"playoffs":0,"championship":0},{"team":"Kiri","w":3,"l":11,"pf":1481.72,"pa":1721.52,"playoffs":0,"championship":0}],
}

export const OVERALL = [
  {"team":"Joe",   "w":106,"l":69, "seasons":13,"playoffs":10,"championships":2,"win_pct":60.6,"playoff_pct":76.9,"total_pf":19643.8},
  {"team":"Andy",  "w":94, "l":81, "seasons":13,"playoffs":8, "championships":1,"win_pct":53.7,"playoff_pct":61.5,"total_pf":18728.7},
  {"team":"Dave",  "w":92, "l":83, "seasons":13,"playoffs":9, "championships":1,"win_pct":52.6,"playoff_pct":69.2,"total_pf":18931.9},
  {"team":"Mike",  "w":91, "l":83, "seasons":13,"playoffs":9, "championships":2,"win_pct":52.3,"playoff_pct":69.2,"total_pf":18750.9},
  {"team":"Ollie", "w":91, "l":84, "seasons":13,"playoffs":9, "championships":1,"win_pct":52.0,"playoff_pct":69.2,"total_pf":19154.4},
  {"team":"Ben",   "w":88, "l":87, "seasons":13,"playoffs":8, "championships":2,"win_pct":50.3,"playoff_pct":61.5,"total_pf":18295.0},
  {"team":"Kenley","w":79, "l":96, "seasons":13,"playoffs":4, "championships":1,"win_pct":45.1,"playoff_pct":30.8,"total_pf":17879.5},
  {"team":"Bobby", "w":75, "l":98, "seasons":13,"playoffs":6, "championships":1,"win_pct":43.4,"playoff_pct":46.2,"total_pf":17942.5},
  {"team":"Jack",  "w":75, "l":98, "seasons":13,"playoffs":4, "championships":1,"win_pct":43.4,"playoff_pct":30.8,"total_pf":18490.7},
  {"team":"Kiri",  "w":57, "l":65, "seasons":9, "playoffs":4, "championships":1,"win_pct":46.7,"playoff_pct":44.4,"total_pf":12710.8},
  {"team":"TJ",    "w":17, "l":22, "seasons":3, "playoffs":1, "championships":0,"win_pct":43.6,"playoff_pct":33.3,"total_pf":3702.9},
  {"team":"Eric",  "w":7,  "l":7,  "seasons":1, "playoffs":0, "championships":0,"win_pct":50.0,"playoff_pct":0.0, "total_pf":1464.0},
]

export const POWER = [
  {"team":"Joe",   "champ_pct":15.4,"playoff_pct":76.9,"win_pct":60.6,"pf_avg":6.50, "power":1.0000,"rank":1},
  {"team":"Mike",  "champ_pct":15.4,"playoff_pct":69.2,"win_pct":52.3,"pf_avg":1.49, "power":0.8308,"rank":2},
  {"team":"Ben",   "champ_pct":15.4,"playoff_pct":61.5,"win_pct":50.3,"pf_avg":-1.33,"power":0.7533,"rank":3},
  {"team":"Ollie", "champ_pct":7.7, "playoff_pct":69.2,"win_pct":52.0,"pf_avg":3.70, "power":0.6464,"rank":4},
  {"team":"Dave",  "champ_pct":7.7, "playoff_pct":69.2,"win_pct":52.6,"pf_avg":2.64, "power":0.6439,"rank":5},
  {"team":"Andy",  "champ_pct":7.7, "playoff_pct":61.5,"win_pct":53.7,"pf_avg":0.91, "power":0.6123,"rank":6},
  {"team":"Kiri",  "champ_pct":11.1,"playoff_pct":44.4,"win_pct":46.7,"pf_avg":-5.14,"power":0.5014,"rank":7},
  {"team":"Bobby", "champ_pct":7.7, "playoff_pct":46.2,"win_pct":43.4,"pf_avg":-3.22,"power":0.3966,"rank":8},
  {"team":"Jack",  "champ_pct":7.7, "playoff_pct":30.8,"win_pct":43.4,"pf_avg":0.03, "power":0.3645,"rank":9},
  {"team":"Kenley","champ_pct":7.7, "playoff_pct":30.8,"win_pct":45.1,"pf_avg":-3.61,"power":0.3540,"rank":10},
  {"team":"Eric",  "champ_pct":0.0, "playoff_pct":0.0, "win_pct":50.0,"pf_avg":5.64, "power":0.1698,"rank":11},
  {"team":"TJ",    "champ_pct":0.0, "playoff_pct":33.3,"win_pct":43.6,"pf_avg":-1.59,"power":0.1633,"rank":12},
]

/* ── Toilet bowl tournament overrides for 2023-2025 ──────────────────────
   These seasons used a toilet bowl tournament; the loser got the toilet,
   which may differ from the last-place regular-season finisher.
   ─────────────────────────────────────────────────────────────────────── */
export const TOILET_OVERRIDES = {
  '2023': 'Bobby',
  '2024': 'Bobby',
  '2025': 'Kenley',
}

export function getChampion(year) {
  return SEASONS[year]?.find(r => r.championship)?.team ?? '?'
}

export function getToilet(year) {
  if (TOILET_OVERRIDES[year]) return TOILET_OVERRIDES[year]
  const rows = SEASONS[year]
  return rows?.[rows.length - 1]?.team ?? '?'
}

/* ── Computed toilet counts (using overrides) ────────────────────────── */
export const toiletCounts = (() => {
  const counts = {}
  Object.keys(SEASONS).forEach(year => {
    const t = getToilet(year)
    counts[t] = (counts[t] || 0) + 1
  })
  return counts
})()

/* ── Power scores (0–100, normalized, toilet-penalty adjusted) ───────── */
export const POWER_SCORES = (() => {
  const maxToilets = Math.max(...Object.values(toiletCounts), 1)
  const scored = POWER.map(p => {
    const tc      = toiletCounts[p.team] || 0
    const penalty = 0.1 * (tc / maxToilets)
    return { team: p.team, adj: p.power - penalty }
  }).sort((a, b) => b.adj - a.adj)
  const maxAdj = scored[0].adj
  const result = {}
  scored.forEach(p => {
    result[p.team.toLowerCase()] = Math.round((p.adj / maxAdj) * 100)
  })
  return result
})()
